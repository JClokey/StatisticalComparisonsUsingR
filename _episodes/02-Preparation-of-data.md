---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 02-Preparation-of-data.md in _episodes_rmd/
title: "Preparation of Data"
teaching: 45
exercises: 10
questions:
- "To be defined"
objectives:
- "Review the structure of a CSV datafile"
- "Read a CSV file into a dataframe"
- "Convert data between character strings and vectors"
keypoints:
- "Open a data file in a text editor or RStudio file viewer"
- "Use `read.table` or `read.csv` to import data"
- "Review a dataframe using `str` and `summary`"
- "Convert columns to factors using `as.factor"
output: html_document
---



## Previewing data

To be added 

> ## Tip
When reading in tabular data in R, you can use either `read.table` or a range of 
pre-configured aliases: `read.csv`, `read.csv2`, `read.delim` and `read.delim2`.
These have function arguments already set to correspond to a range of different 
formats of csv and tsv files.
{: .callout}


> ## Challenge 1
> 
> Use RStudio “Files” window, your text editor of choice, or a spreadsheet 
> program to open and review the data file gallstones.csv (do not overwrite 
> the file by saving afterwards). Briefly discuss with your neighbour the 
> meaning of the headers and the nature of the data in each field
> > ## Solution to challenge 1
> > 
> > The field contents are as follows:
> > Patient_ID – a unique numerical identifier for each patient
> > Gender – female or male: one-letter character string
> > Age – patient’s age: numerical value in years
> > Height – patient’s height: numerical value in (probably) cm
> > Weight – patient’s weight: numerical value in (probably) kg
> > BMI – patient’s body mass index (weight/height in m<sup>2</sup>)
> > Obese – is the patient obese (BMI>30): 0=no, 1=yes;
> > Smoking.Status – does the patient smoke: 1=non-smoker, 2=smoker; 
> > Alcohol.Consumption – does the patient drink alcohol: 0=no, 1=low consumption,
> > 2=moderate/high consumption; 
> > Treatment – did the patient receive the ursodeoxycholic acid treatment: 
> > 0=untreated, 1=treated; 
> > Rec – did gallstones recur: 0=no recurrence, 1=recurrence; 
> > Mult – did the patient have multiple gallstones: 0=single stone, 1=multiple 
> > stones; 
> > Diam – gallstone diameter in mm; Dis – time in days for gallstone dissolution
> {: .solution}
{: .challenge}

Use read.csv to upload the file into a dataframe called ‘gallstones’


```r
gallstones<-read.csv("../Data/gallstones.csv")
```

Look at the structure of the dataframe using str and summary

```r
str(gallstones)
```

```
## 'data.frame':	37 obs. of  14 variables:
##  $ Patient_ID         : Factor w/ 37 levels "P1","P10","P11",..: 18 21 9 20 33 34 35 19 28 30 ...
##  $ Gender             : Factor w/ 2 levels "F","M": 1 1 2 1 1 1 1 1 1 1 ...
##  $ Age                : int  64 81 77 80 86 69 75 77 73 88 ...
##  $ Height             : int  147 151 156 156 156 157 157 160 160 160 ...
##  $ Weight             : int  65 69 59 47 53 48 46 55 51 54 ...
##  $ BMI                : num  30.1 30.3 24.2 19.3 21.8 ...
##  $ Obese              : int  1 1 0 0 0 0 0 0 0 0 ...
##  $ Smoking.Status     : int  2 2 2 2 2 1 2 2 2 1 ...
##  $ Alcohol.Consumption: int  1 2 1 3 2 3 2 3 3 3 ...
##  $ Treatment          : int  1 0 0 1 0 1 0 1 0 1 ...
##  $ Rec                : int  1 1 0 0 1 0 1 0 1 0 ...
##  $ Mult               : int  1 1 0 0 0 0 1 0 0 1 ...
##  $ Diam               : int  6 7 20 15 18 19 14 18 15 5 ...
##  $ Dis                : int  8 6 20 2 14 8 8 4 15 3 ...
```

```r
summary(gallstones)
```

```
##    Patient_ID Gender      Age            Height          Weight     
##  P1     : 1   F:21   Min.   :31.00   Min.   :147.0   Min.   : 46.0  
##  P10    : 1   M:16   1st Qu.:67.00   1st Qu.:160.0   1st Qu.: 58.0  
##  P11    : 1          Median :77.00   Median :163.0   Median : 65.0  
##  P12    : 1          Mean   :72.57   Mean   :164.6   Mean   : 69.7  
##  P13    : 1          3rd Qu.:85.00   3rd Qu.:168.0   3rd Qu.: 79.0  
##  P14    : 1          Max.   :90.00   Max.   :189.0   Max.   :109.0  
##  (Other):31                                                         
##       BMI            Obese        Smoking.Status  Alcohol.Consumption
##  Min.   :18.66   Min.   :0.0000   Min.   :1.000   Min.   :1.000      
##  1st Qu.:21.78   1st Qu.:0.0000   1st Qu.:1.000   1st Qu.:2.000      
##  Median :24.46   Median :0.0000   Median :2.000   Median :2.000      
##  Mean   :25.51   Mean   :0.2973   Mean   :1.649   Mean   :2.243      
##  3rd Qu.:30.09   3rd Qu.:1.0000   3rd Qu.:2.000   3rd Qu.:3.000      
##  Max.   :34.72   Max.   :1.0000   Max.   :2.000   Max.   :3.000      
##                                                                      
##    Treatment           Rec              Mult             Diam      
##  Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   : 3.00  
##  1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.: 6.00  
##  Median :1.0000   Median :0.0000   Median :1.0000   Median :10.00  
##  Mean   :0.5405   Mean   :0.4324   Mean   :0.5135   Mean   :11.41  
##  3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:15.00  
##  Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :27.00  
##                                                                    
##       Dis       
##  Min.   : 2.00  
##  1st Qu.: 6.00  
##  Median : 8.00  
##  Mean   :10.68  
##  3rd Qu.:12.00  
##  Max.   :48.00  
## 
```

Finally, patient identifiers should be unique in our dataset, and so probably 
are best not recorded as factors. We'll use `as.character` to convert that column to 
character data

```r
gallstones$Patient_ID <- as.character(gallstones$Patient_ID)
str(gallstones$Patient_ID)
```

```
##  chr [1:37] "P25" "P28" "P17" "P27" "P5" "P6" "P7" "P26" "P34" "P36" "P11" ...
```
