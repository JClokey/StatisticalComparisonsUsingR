---
title: "Preparation of Data"
teaching: 45
exercises: 10
questions:
- "To be defined"
objectives:
- "Review the structure of a CSV datafile"
- "Read a CSV file into a dataframe"
- "Convert data between character strings and vectors"
keypoints:
- "Open a data file in a text editor or RStudio file viewer"
- "Use `read.table` or `read.csv` to import data"
- "Review a dataframe using `str` and `summary`"
- "Convert columns to factors using `as.factor"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Previewing data

To be added 

> ## Tip
When reading in tabular data in R, you can use either `read.table` or a range of 
pre-configured aliases: `read.csv`, `read.csv2`, `read.delim` and `read.delim2`.
These have function arguments already set to correspond to a range of different 
formats of csv and tsv files.
{: .callout}


> ## Challenge 1
> 
> Use RStudio “Files” window, your text editor of choice, or a spreadsheet 
> program to open and review the data file gallstones.csv (do not overwrite 
> the file by saving afterwards). Briefly discuss with your neighbour the 
> meaning of the headers and the nature of the data in each field
> > ## Solution to challenge 1
> > 
> > The field contents are as follows:
> > Patient_ID – a unique numerical identifier for each patient
> > Gender – female or male: one-letter character string
> > Age – patient’s age: numerical value in years
> > Height – patient’s height: numerical value in (probably) cm
> > Weight – patient’s weight: numerical value in (probably) kg
> > BMI – patient’s body mass index (weight/height in m<sup>2</sup>)
> > Obese – is the patient obese (BMI>30): 0=no, 1=yes;
> > Smoking.Status – does the patient smoke: 1=non-smoker, 2=smoker; 
> > Alcohol.Consumption – does the patient drink alcohol: 0=no, 1=low consumption,
> > 2=moderate/high consumption; 
> > Treatment – did the patient receive the ursodeoxycholic acid treatment: 
> > 0=untreated, 1=treated; 
> > Rec – did gallstones recur: 0=no recurrence, 1=recurrence; 
> > Mult – did the patient have multiple gallstones: 0=single stone, 1=multiple 
> > stones; 
> > Diam – gallstone diameter in mm; Dis – time in days for gallstone dissolution
> {: .solution}
{: .challenge}

Use read.csv to upload the file into a dataframe called ‘gallstones’

```{r}
gallstones<-read.csv("../Data/gallstones.csv")
```

Look at the structure of the dataframe using str and summary
```{r}
str(gallstones)
summary(gallstones)
```

Finally, patient identifiers should be unique in our dataset, and so probably 
are best not recorded as factors. We'll use `as.character` to convert that column to 
character data
```{r}
gallstones$Patient_ID <- as.character(gallstones$Patient_ID)
str(gallstones$Patient_ID)
```
